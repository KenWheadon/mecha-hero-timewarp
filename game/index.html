<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mecha Hero - Mini Jam 197: Recursion</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="overlay"></div>
    <div id="onboarding-popup">
      <div id="onboarding-content">
        <h3 id="onboarding-title"></h3>
        <p id="onboarding-text"></p>
        <button id="onboarding-close">Got it!</button>
      </div>
    </div>
    <div id="how-to-play">
      <button id="close-htp">&times;</button>
      <h2>How to Play Mecha Hero</h2>
      <p>
        Enter the recursive arena and counter the enemy's mecha poses before
        time runs out!
      </p>
      <ul>
        <li>
          <strong>Poses:</strong> Robot starts neutral, shifts to attack. Fight
          1: 2 unique poses. Fights 2-3: 4 unique. Fight 4: 8 random (repeats
          ok).
        </li>
        <li>
          <strong>Respond:</strong> When attack shows, click correct counter
          within timer. Correct: Enemy HP -1.
        </li>
        <li>
          <strong>Timer:</strong> Drains per level (10s/6s/4s/2s)—timeout loses
          heart, retry pose.
        </li>
        <li><strong>Hearts/HP:</strong> 3 player hearts. Enemy: 2/4/4/8 HP.</li>
        <li>
          <strong>Levels:</strong> Deplete HP to win fight. Damaged (2s) + Warp
          (5s, L1-3) before next. L4: Final destroy.
        </li>
        <li>
          <strong>Crystal:</strong> Energy (2 charges) drains on warps (L2-3).
        </li>
        <li><strong>Pause:</strong> Freeze anytime.</li>
      </ul>
      <p>Recursion rules: Echo and accelerate—adapt or overload!</p>
    </div>

    <div id="title-screen">
      <h1 id="title">MECHA HERO</h1>
      <p>Mini Jam 179: Recursion</p>
      <div id="high-score">High Score: Fight <span id="high-score-value">0</span>/4</div>
      <div class="button-container">
        <button class="title-btn" id="start-btn">Start Game</button>
        <button class="title-btn" id="htp-btn">How to Play</button>
        <button class="title-btn audio-toggle-btn" id="audio-toggle-title">
          <img src="images/icon-musicnote.png" alt="Audio" class="audio-icon" />
          Audio
        </button>
      </div>
    </div>

    <div id="game">
      <!-- Top Bar: Hearts, Fight Info, Controls -->
      <div id="top-bar">
        <div id="hearts"></div>
        <div id="fight-info">Fight: 1/4</div>
        <div id="controls">
          <button id="audio-toggle-combat" class="audio-toggle-btn">
            <img src="images/icon-musicnote.png" alt="Audio" class="audio-icon" />
          </button>
          <button id="pause">Pause</button>
        </div>
      </div>

      <!-- Timer -->
      <div id="timer">
        <div id="timer-paused">PAUSED</div>
        <div id="timer-fill"></div>
      </div>

      <!-- Enemy Section: Status Bars + Pose -->
      <div id="enemy-section">
        <div id="status-bars">
          <div id="crystal-energy"><div id="crystal-fill"></div></div>
          <div id="enemy-hp"><div id="enemy-hp-fill"></div></div>
        </div>
        <div id="enemy-container">
          <div id="enemy-pose">
            <img
              id="pose-img"
              src="images/pose1.png"
              alt="Enemy Pose"
              onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTExIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5OZXV0cmFsIFN0YW5jZTwvdGV4dD48L3N2Zz4='"
            />
          </div>
        </div>
      </div>

      <!-- Instruction and Message -->
      <div id="instruction">Prepare for battle...</div>
      <div id="message"></div>

      <!-- Attacks Section -->
      <div id="attacks-section">
        <div id="attacks">
          <button class="attack-btn" data-action="shield">
            <img
              src="images/shield.png"
              alt="Shield"
              onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiNmZmYiLz48L3N2Zz4='"
            />
            Shield Bash
          </button>
          <button class="attack-btn" data-action="rocket">
            <img
              src="images/rocket.png"
              alt="Rocket"
              onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiNmZjAiLz48L3N2Zz4='"
            />
            Rocket Fist
          </button>
          <button class="attack-btn" data-action="sword">
            <img
              src="images/sword.png"
              alt="Sword"
              onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiNmY2MiLz48L3N2Zz4='"
            />
            Robo Bat
          </button>
          <button class="attack-btn" data-action="plasma">
            <img
              src="images/plasma.png"
              alt="Plasma"
              onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiMwMGZmIi8+PC9zdmc+';"
            />
            Plasma Glasses
          </button>
        </div>
      </div>

      <!-- Restart Button -->
      <button id="restart">Restart Game</button>
    </div>

    <script type="module">
      import { initTitleScreen } from "./title-screen.js";

      // Initialize title screen on page load
      initTitleScreen();
    </script>
  </body>
</html>
